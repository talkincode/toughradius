# 版本变更日志

## v2.1.9

- 发布日期 2016-07-14

#### 版本说明

- 修复系统配置修改提交错误的 bug #101
- 重新设计在线统计和流量统计功能，数据更准确。


## v2.1.8.1

- 发布日期 2016-06-22

#### 版本说明

修改许可协议，放弃 AGPL 协议，采用 Apache License v2.0


## v2.1.8

- 发布日期 2016-06-15

#### 版本说明

此版本支持硬派云通知服务(邮件,短信通知提醒服务)

- 用户开户新增支持硬派云短信和邮件通知服务
- 修复一些bug



## v2.1.7

- 发布日期：2015-05-31

#### 版本说明

这是首个支持接入云端服务的版本，由于硬派云还没正式开放注册，还需耐心等待。

- 账号续费bug修复
- 硬派云服务接入支持
- 到期通知重构，支持硬派云通知
- 重构定时任务
- 新增硬派云服务检测task
- 新增系统消息跟踪功能
- 统一系统sid获取方法


## v2.1.6

- 发布日期：2015-05-12

#### 版本说明

- 修正插入在线用户的错误
- 补充用户详情界面密码显示功能
- 新增用户自动解锁功能
- 新增用户在线超时检测自动下线功能


## v2.1.5

- 发布日期：30 Apr 2016

#### 版本说明

- 修复前面版本的一些bug
- 加入用户账号充值功能
- 修复强制下线的bug
- 新增用户续费API接口
- 修复mysql初始化的bug
- 修正Makefile的导致安装失败的错误
- 加入对V1版本的数据备份文件的恢复支持
- 修复删除用户信息的bug，未删除干净
- 加入订购查询的API接口
- 加入账号自动生成的API接口


## v2.1.2

- 发布日期：12 Apr 2016

#### 版本说明

- 修复自V2.1.0版本的一些bug

## v2.1.0

- 发布日期：1 Apr 2016

#### 版本说明

- 完成一期规划的 API 接口。
- 将数据库缓存与 session 管理替换为 redis。
- 支持非 docker 模式的安装部署。
- 优化 docker 构建。
- 增加自有资费。
- 修复大量 bug。
- 改进系统性能。



## v2.0.5

- 发布日期： 9 Mar 2016

#### 版本说明

- 更新API，增加结果码状态定义。
- 新增系统日志查询功能。
- 新增用户反馈功能，支持在线提交反馈。
- 新增客户授权码管理配置功能。
- 新增加了一个“关于”信息页面。


## v2.0.4

- 发布日期：29 Feb 2016

#### 版本说明

- 修复了非管理操作员登陆后访问用户模块报错的bug


## v2.0.3

- 发布日期：20 Feb 2016

#### 版本说明

- 删除了一些无用的初始化参数
- 安装脚本支持设置mysql使用的最大内存
- 在线用户表增加索引


## v2.0.2

- 发布日期：19 Feb 2016

#### 版本说明

ToughRADIUS V2.x版本并不是 V1.x版本的简单延续，而是一次完全重构，一次打破兼容性的重构。

在保留核心功能的基础上，砍掉了大部分可有可无的功能，比如砍掉自助服务模块是一个非常大的动作。

在技术框架上进行了完全的重写，并采用pypy这个更快的基础支撑平台，对V1.x版本进行了大刀阔斧的改造，对安装配置操作进行了精简和优化。

- 移除了独立的系统控制管理子系统，部分功能合并到主管理系统。
- 移除了自助服务子系统。
- 新增API模块，提供第三方通过API来实现自助服务，扩展管理的能力。
- 移除客户经理管理模块。
- 移除黑白名单管理模块。
- 移除充值卡管理模块。
- 移除工单管理模块。
- 暂时移除了用户消息跟踪模块。
- 修复了一些bug。
- 系统监听的端口现在只有3个必须的：1816，1812，1813，其他的全部移除。


## v1.2.0.2

- 发布日期：17 Oct 2015 

#### 版本说明

- 修复了系统创建后，用户密码认证失效，全部放行的bug。
- 修复了无法使用mschapv2认证的错误，支持mppe128位加密。
- 删除了mschapv1的支持。


## v1.2.1

- 发布日期： 13 Oct 2015

#### 版本说明

- 不再发布为Python标准安装包，ToughRADIUS在发布上将主要采用Docker镜像打包模式，这让我们更专注的解决问题，而不是制造各种问题。
- 在发送强制下线消息时有一个打印日志的BUG被修复。
- 清理了一些无用的逻辑代码。
- 用户状态的改进，查询时根据用户过期日期查询，在显示时做额外的判断，修正了用户已过期还显示为正常的错误。
- 充值卡续费的BUG修复。
- 发送邮件模块的BUG修复。
- 操作员cookie过期导致退出链接出错的BUG修复。
- 更新Dockerfile构建脚本。


## v1.1.5

- 发布日期：8 Jul 2015

#### 版本说明

- 对管理界面进行了重新设计排版，更加美观易用。
- 优化了配置参数界面采用tab标签页排版，体验更好。
- 用户自助服务系统的bug修复。
- 用户交易新增备注属性。
- 支持用户MAC地址认证。
- 新增全新的系统控制管理子系统，可以实现服务在线升级，重启，系统配置在线修改。
- 数据库备份管理功能迁移到系统控制管理界面，新增上传数据恢复功能，数据库初始化功能。
- 系统日志管理迁移到系统控制管理。
- 对Dokcer镜像构建进行优化，加入内置MySQL驱动。
- 更好的支持Docker模式部署。


## v1.1.1

- 发布日期：19 Jun 2015

#### 版本说明

- 对管理子系统重构，进行模块拆分，有利于系统功能扩展定制。
- 新增客户经理管理功能，支持操作员与客户经理绑定。
- 新增工单功能，支持用户工单受理。
- 界面UI进行了较大调整。
- 对V1.0的一些bug的修复。
- 新增在线支持组件，可以实时反馈问题。



## v1.0.4

- 发布日期：18 Jan 2015

#### 版本说明

- 修复资费修改速率不正确的BUG
- 增加对重复性资费属性的支持，比如mpd，思科等设备
- 增加mpd的字典



## v1.0.3

- 发布日期：26 Mar 2015

#### 版本说明

- 当radius地址被设置成127.0.0.1时，管理应用会自动转换为当前系统的地址。
- 修复BAS批量下线弹窗的bug




## v1.0.2

- 发布日期： 23 Mar 2015

#### 版本说明

- 修正ros下发速率单位bug。
- 修复余额充值卡充值后状态不正确的bug。
- 新增数据备份与恢复功能。



## v1.0.0

- 发布日期：18 Jan 2015

#### 版本说明

- 资费单位支持小数点。
- 修复销户退费BUG。
- 在线查询ui bug修复。
- 新增系统日志查看。
- 修复了充值缴费bug。
- 修复爱快未下发nas地址造成的问题。



## v0.9.9

- 发布日期：8 Mar 2015

#### 版本说明

- 用户受理界面调整
- 修复当路由器未发送nas地址时不能识别nas地址的bug。
- 新增了操作员与区域关联支持，对区域进行权限控制。
- 新增了用户账号资费变更功能支持。
- 增强用户数据导入，支持证件号码，手机号码，支持原始开通日期导入。



## v0.9.8

- 发布日期：5 Mar 2015

#### 版本说明

- 新增mschapv1，mschapv2的验证支持。
- 修复了到期用户下发时长为0无效的bug。
- 首页消息统计图表刷新bug。



## v0.9.7

- 发布日期： 4 Mar 2015

#### 版本说明

- 支持向NAS设备下发记账间隔，新增了默认参数。
- 支持爱快设备，支持下发限速，新增了默认参数。
- toughctl工具新增了执行sql的功能，可以用来做升级数据库使用。
- 简化了安装配置流程，提供了一个最小可用使用Sqlite存储数据的版本,建议使用standalon模式。
- 去掉了了默认需要安装的mysql，openssl的依赖，当需要时另行安装，不影响最小可用版的正常使用。
- 去掉了数据库ftp备份功能，以后会提供更好的数据库备份方案。
- 支持到期用户下发特定时长的配置，配合到期下发地址池使用，当下发时长为0时，会发送认证拒绝消息。
- 管理界面首页控制台新增了对最近15分钟的消息负载统计。



## v0.9.6

- 发布日期： 2 Mar 2015

#### 版本说明

- 提供了对sqlite嵌入式数据库支持,使用sqlite数据库无需安装任何数据库软件。
- 支持以独立进程运行所有服务，提供standalone模式
- 数据库配置部分变化，采用dburl格式，考虑到后期支持mssql，pgsql等，提供灵活性。使用sqlite数据库时建议使用standalone模式运行，因为sqlite对多进程支持不是很好。
- 数据库用户记账表（slc_rad_billing）新增两个字段，请更新此表。
- 新增对在线用户的过期检查，自动删除过期在线用户。
- 初始化数据库请用toughctl --initdb,无其他参数，无交互提示，如果有数据，请记得备份，sqlite数据只需要拷贝文件即可。
- 资费新增时，单位改为Mbps。
- 支持smtp免认证模式，密码填写no或none即可。
- 触发通知的url格式bug修复。


## v0.9.5

- 发布日期：28 Feb 2015

#### 版本说明

- 修复买断时长与买断流量资费续费的BUG。
- 支持监听指定的IP地址。
- 修复操作员密码格式导致的提交失败BUG。
- 修复管理控制台标题参数修改不生效的BUG。
- 新增数据库连接池自动重连的功能。



## v0.9.4

- 发布日期：27 Feb 2015

#### 版本说明

- 修复导入用户余额错误bug
- #24 修复自助系统无法访问bug
- 修复在线用户解锁bug，不能自动刷新页面。
- 修复预付费时长下发会话时长不准确的bug
- 实现Linux下https支持，包括管理控制台，自助服务系统，radius管理接口。
- 实现radius管理接口通信加密，进一步提高安全。


## v0.9.0

- 发布日期：22 Feb 2015

#### 版本说明

- 修复了上一版本的部分bug
- 更新了日志记录方式
- 最终稳定项目结构
- 支持以python标准模块安装
- 已可在生产环境使用



## v0.7

- 发布日期：15 Feb 2015

#### 版本说明

- 加入时区配置
- 加入邮件发送支持功能
- 加入到期邮件发送定时任务，支持模板定义
- 加入到期触发通知url功能，支持参数自定义
- 用户自助服务支持邮箱绑定，邮箱找回密码
- 修复了上一版本的bug
- 完善了记账功能，当用户余额不足或流量时长不足时发送DM下线消息。
- 系统配置文件从json改为ini格式
- 更新了安装脚本



## v0.6

- 发布日期：11 Feb 2015

#### 版本说明

- 新增三种资费策略，买断（打包）时长，买断（打包）流量，预付费流量。
- 新增流量统计功能
- 更新自助服务系统充值续费功能，支持新增的计费策略。
- 修复上一版本的bug，优化界面。
- 加入更多自动化测试



## v0.5

- 发布日期：8 Feb 2015

#### 版本说明

- 新增充值卡管理功能，支持资费卡与余额卡。
- 自助服务系统支持用户使用任意充值卡开户，支持通过充值卡充值续费。
- 新增通用限速适配，支持自动转换适配ros，华为，中兴，等设备的速率转换下发
- 新增到期地址池下发功能
- 自助服务系统安全加强，增加对登陆错误，以及充值卡密码错误次数的控制（5次）。
- 修复上一版本的一些bug。
- 将windows脚本放入专用文件夹。



## v0.4

- 发布日期：3 Feb 2015

#### 版本说明

- 完成黑白名单功能
- 删除用户组
- 增加操作员与权限管理
- 增加订购记录查询
- 增加计费查询，受理日志，订购查询数据导出的功能
- 修复上一版本的bug
- 调整一些UI
- 用户自助服务增加了一个portal跳转验证的功能
- 增加了对python2.6的兼容
- 增加了centos6的自动安装脚本



## v0.3

- 发布日期：28 Jan 2015

#### 版本说明

- 几个bug被修复
- 配置文件内容更新
- 资费数据结构移除区域属性
- 新增自助服务子系统
- docker镜像脚本更新
- 文档内容更新


## v0.2

- 发布日期：18 Jan 2015

#### 版本说明

- 无


## v0.1

- 发布日期：15 Jan 2015

#### 版本说明

- 完成首个版本

